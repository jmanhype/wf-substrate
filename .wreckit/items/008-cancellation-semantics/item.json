{
  "schema_version": 1,
  "id": "008-cancellation-semantics",
  "title": "Implement structured cancellation semantics",
  "state": "idea",
  "overview": "Implement wf_cancel.erl: structured cancellation for three scopes:\n1. Activity cancellation: cancel a single task. If the task is running (has yielded an effect), the effect is marked cancelled. If not yet started, the task is skipped. Produces a cancel_activity event.\n2. Case cancellation: cancel an entire workflow instance. All active branches, pending effects, and running tasks are cancelled. The case transitions to a terminal cancelled state. Produces a cancel_case event.\n3. Region cancellation: cancel a scoped subtree identified by cancel scope ID. Only tokens and tasks within the named scope are cancelled. Tokens outside the scope are unaffected. Produces cancel_region events for each affected item.\n\nCancellation propagation is O(scope size) — it walks only the tokens/tasks in the affected scope, not the entire workflow. Cancelled scopes produce structured cancel events with: scope_id, cancelled_tokens, cancelled_effects, timestamp. Cancellation does not corrupt unrelated scopes — verified by invariant checks.\n\nIntegrates with wf_exec (scope stack), wf_state (scope metadata), and wf_effect (effect cancellation). Export: cancel_activity/3, cancel_case/1, cancel_region/3, is_cancelled/2.",
  "branch": null,
  "pr_url": null,
  "pr_number": null,
  "last_error": null,
  "created_at": "2026-02-10T00:00:00.000Z",
  "updated_at": "2026-02-10T00:00:00.000Z"
}
